version: 1.8.0.{build}
branches:
  only:
  - master
max_jobs: 4
image: Visual Studio 2019
configuration:
- Debug
- Release
- Debug_DLL
- Release_DLL
platform:
- x64
- Win32
environment: {}
before_build:
- cmd: >-
    @echo off

    pushd googletest
    	if exist output (
    		rmdir /s /q output
    	)

    	if exist intermediate (
    		rmdir /s /q intermediate
    	)
    popd
build:
  project: googletest\msvc\2019\gtest.sln
  parallel: true
  verbosity: normal
artifacts:
- path: googletest\output
  name: googletest_binaries_$(Configuration)_$(Platform)-$(appveyor_build_version)
- path: googletest\include
  name: googletest_include-$(appveyor_build_version)
deploy:
- provider: GitHub
  tag: release-$(appveyor_build_version)
  auth_token:
    secure: UianiPU61DJyUnD84gcncXrpwZLPQKb3BO4kbQ3cZdSaQ1SeZOvijH6MvGGGcEat
  repository: munsingh/googletest
  artifact: googletest_binaries_$(Configuration)_$(Platform)-$(appveyor_build_version),googletest_include-$(appveyor_build_version)
  draft: false
  prerelease: false
  force_update: false